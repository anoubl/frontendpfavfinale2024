<app-nav-enseignant></app-nav-enseignant>
<div class="container">
  <div class="row">
    <div class="col-md-3">
      <div class="form-group">
        <label for="semester">Semester:</label>
        <select class="form-control" id="semester" [(ngModel)]="selectedSemester" (change)="onSemesterChange()" >
          <option *ngFor="let semester of semesters" [value]="semester.id">{{ semester.label }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label for="subject">Subject:</label>
        <select class="form-control" id="subject" [(ngModel)]="selectedSubject" >
          <option *ngFor="let subject of subjects" [value]="subject.code">{{ subject.label }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label for="class">Class:</label>
        <select class="form-control" id="class" [(ngModel)]="selectedClass" (change)="onClassChange()" >
          <option *ngFor="let classe of classes" [value]="classe.id">{{ classe.label }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group">
        <label for="group">Group:</label>
        <select class="form-control" id="group" [(ngModel)]="selectedGroup" >
          <option *ngFor="let group of groups" [value]="group.id">{{ group.nom }}</option>
        </select>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 text-center">
      <button class="btn btn-primary mt-3" (click)="fetchStudentsAndNotes()">Afficher</button>
    </div>
  </div>

  <table class="table table-striped" *ngIf="students.length">
    <thead>
    <tr>
      <th>Nom</th>
      <th>TP</th>
      <th>Projet</th>
      <th>Contrôle 1</th>
      <th>Contrôle 2</th>
      <th>Moyenne</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let student of students">
      <td>{{ student.nom }}</td>
      <td><input type="number" [(ngModel)]="student.tp" (change)="calculateAverage(student)"  /></td>
      <td><input type="number" [(ngModel)]="student.projet" (change)="calculateAverage(student)"  /></td>
      <td><input type="number" [(ngModel)]="student.controle1" (change)="calculateAverage(student)"  /></td>
      <td><input type="number" [(ngModel)]="student.controle2" (change)="calculateAverage(student)"  /></td>
      <td>{{ student.moyenne }}</td>
    </tr>
    </tbody>
  </table>

  <button class="btn btn-primary" (click)="saveNotes()">Enregistrer les notes</button>
</div>
